version: '2'

#
# using docker-compose for dev only - UCS can't make use of this.  However, it makes
# exposing the right ports easier because you don't have to type a huge command line,
# and we can also map volumes here as well.
#
services:
  mdm_server:
    build: 
      context: .
      args:
        FILEWAVE_VERSION: 11.2.4

    hostname: ${HOSTNAME}
    domainname: ${DOMAINNAME}

    ports:
      - "19995:19995"
      - "19996:19996"
      - "20005:20005"
      - "20006:20006"
      - "20015:20015"
      - "20016:20016"
      - "20017:20017"
      - "20030:20030"
      - "20443:20443"
      - "20445:20445"
      - "20446:20446"

    volumes:
      - /tmp/docker-test/apache_conf:/usr/local/filewave/apache/conf
      - /tmp/docker-test/apache_logs:/usr/local/filewave/apache/logs
      - /tmp/docker-test/apache_passwords:/usr/local/filewave/apache/passwords
      - /tmp/docker-test/db_folder:/fwxserver/DB
      - /tmp/docker-test/data_folder:/fwxserver/Data Folder
      - /tmp/docker-test/filewave_certs:/usr/local/filewave/certs
      - /tmp/docker-test/filewave_fwcld:/usr/local/filewave/fwcld
      - /tmp/docker-test/filewave_ipa:/usr/local/filewave/ipa
      - /tmp/docker-test/filewave_media:/usr/local/filewave/media
      - /tmp/docker-test/filewave_log:/usr/local/filewave/log
       
    restart: unless-stopped
